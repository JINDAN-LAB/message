<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jindan.jdy.common.mapper.MaintainReportMapper">

	<resultMap id="BaseResultMap" type="com.jindan.jdy.common.pojo.MaintainReport">
		<id column="mpid" property="mpid" />
		<id column="submit_content" property="submitContent" />
		<id column="submit_person" property="submitPerson" />
		<id column="submit_time" property="submitTime" />
		<id column="parent_id" property="parentId" />
		<id column="insert_time" property="insertTime" />
		<id column="update_time" property="updateTime" />
		<id column="delete_id" property="deleteId" />
	</resultMap>


	<resultMap id="BaseResultAllMap" type="com.jindan.jdy.common.dto.MaintainReportDto">
		<id column="mpid1" property="mpid" />
		<id column="submit_content1" property="submitContent" />
		<id column="submit_person1" property="submitPerson" />
		<id column="submit_time1" property="submitTime" />
		<id column="parent_id1" property="parentId" />
		<id column="insert_time1" property="insertTime" />
		<id column="update_time1" property="updateTime" />
		<id column="delete_id1" property="deleteId" />
		<association property="departmentFacility" column="id" javaType="com.jindan.jdy.common.pojo.DepartmentFacility">
			<id column="id" property="id" />
			<id column="goods_id" property="goodsId" />
			<id column="brand" property="brand" />
			<id column="model" property="model" />
			<id column="nuit" property="nuit" />
			<id column="number" property="number" />
			<id column="price" property="price" />
			<id column="states" property="states" />
			<id column="create_name" property="createName" />
			<id column="insert_time" property="insertTime" />
			<id column="update_time" property="updateTime" />
			<id column="file_id" property="fileId" />
			<id column="imgurl" property="imgurl" />
			<id column="parent_id" property="parentId" />
			<id column="delete_id" property="deleteId" />
			<id column="installtime" property="installtime" />
			<id column="usetime" property="usetime" />
			<id column="allkg" property="allkg" />
			<id column="assetnumber" property="assetnumber" />
			<id column="serialnumber" property="serialnumber" />
			<id column="departments" property="departments" />
			<id column="specifications" property="specifications" />
			<id column="remarks" property="remarks" />
			<id column="pid_number" property="pidNumber" />
			<id column="repair_period" property="repairPeriod" />
			<id column="is_repair" property="isRepair" />
			<id column="maintain_person" property="maintainPerson" />
			<id column="bit_number" property="bitNumber" />
			<id column="rate_of_work" property="rateOfWork" />
			<id column="erweima" property="erweima" />
			<id column="powers" property="powers" />
			<id column="parameters" property="parameters" />
			<id column="lubrication" property="lubrication" />
			<id column="texture" property="texture" />
			<id column="all_weight" property="allWeight" />
			<id column="revolutions_per_minute" property="revolutionsPerMinute" />
			<id column="commodity_name" property="commodityName" />
			<id column="frequencys" property="frequencys" />
			<id column="warehouse_id" property="warehouseId" />
		</association>
 	</resultMap>

	<sql id="Base_Column_List">
		mpid, submit_content, submit_person, submit_time, parent_id, insert_time, update_time, delete_id
	</sql>

	<sql id="selectexpend">
		<where>
			<if test="mpid != null and mpid !='' ">
				and maintain_report.mpid = #{mpid}
			</if>
			<if test="submitContent != null and submitContent !='' ">
				and maintain_report.submit_content = #{submitContent}
			</if>
			<if test="submitPerson != null and submitPerson !='' ">
				and maintain_report.submit_person = #{submitPerson}
			</if>
			<if test="submitTime != null and submitTime !='' ">
				and maintain_report.`submit_time` = #{submitTime}
			</if>
			<if test="parentId != null and parentId !='' ">
				and maintain_report.parent_id = #{parentId}
			</if>
			<if test="insertTime != null and insertTime !='' ">
				and maintain_report.insert_time = "%"#{insertTime}"%"
			</if>
			<if test="facililtyPerson != null and facililtyPerson !='' ">
				and maintain_report.facililty_person = #{facililtyPerson}
			</if>
			and maintain_report.delete_id='0'
		</where>
	</sql>

<!--	seleteAlllist-->
	<select id="seleteAlllist" parameterType="com.jindan.jdy.common.dto.StockDepositoryDTO"  resultMap="BaseResultAllMap">
		SELECT
			maintain_report.mpid as mpid1,
		maintain_report.submit_content as submit_content1,
		maintain_report.submit_person as submit_person1,
		maintain_report.submit_time as submit_time1,
		maintain_report.parent_id as parent_id1,
		maintain_report.insert_time as insert_time1,
		maintain_report.update_time as update_time1,
		maintain_report.delete_id as delete_id1,
		maintain_report.facililty_person as facililty_person1,
        department_facility.*
		FROM
			maintain_report
		left JOIN   department_facility  ON maintain_report.parent_id = department_facility.id  and maintain_report.delete_id = 0
		 <include refid="selectexpend"></include>
	</select>


</mapper>