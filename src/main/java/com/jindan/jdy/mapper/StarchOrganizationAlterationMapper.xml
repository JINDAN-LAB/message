<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jindan.jdy.common.mapper.StarchOrganizationAlterationMapper">

	<resultMap id="BaseResultMap" type="com.jindan.jdy.common.pojo.StarchOrganizationAlteration">
		<id column="aid" property="aid" />
		<id column="astatus" property="astatus" />
		<id column="alteration_number" property="alterationNumber" />
		<id column="alteration_date" property="alterationDate" />
		<id column="alteration_person" property="alterationPerson" />
		<id column="alteration_type" property="alterationType" />
		<id column="alteration_name" property="alterationName" />
		<id column="alteration_eares" property="alterationEares" />
		<id column="deposit_region" property="depositRegion" />
		<id column="use_company" property="useCompany" />
		<id column="use_department" property="useDepartment" />
		<id column="use_person" property="usePerson" />
		<id column="remarks" property="remarks" />
		<id column="insert_time" property="insertTime" />
		<id column="update_time" property="updateTime" />
		<id column="delete_id" property="deleteId" />
		<id column="parent_id" property="parentId" />
	</resultMap>
	<sql id="Base_Column_List">
		aid, astatus, alteration_number, alteration_date, alteration_person, alteration_type, alteration_name, alteration_eares, deposit_region, use_company, use_department, use_person, remarks, insert_time, update_time, delete_id, parent_id
	</sql>

	<resultMap id="BaseResultMapDto" type="com.jindan.jdy.common.dto.StarchOrganizationAlterationDto">
		<id column="aid" property="aid" />
		<id column="astatus" property="astatus" />
		<id column="alteration_number" property="alterationNumber" />
		<id column="alteration_date" property="alterationDate" />
		<id column="alteration_person" property="alterationPerson" />
		<id column="alteration_type" property="alterationType" />
		<id column="alteration_name" property="alterationName" />
		<id column="alteration_eares" property="alterationEares" />
		<id column="deposit_region" property="depositRegion" />
		<id column="use_company" property="useCompany" />
		<id column="use_department" property="useDepartment" />
		<id column="use_person" property="usePerson" />
		<id column="remarks" property="remarks" />
		<id column="delete_id" property="deleteId" />
		<id column="parent_id" property="parentId" />
		<collection property="putList" column="oid" ofType="com.jindan.jdy.common.pojo.StarchOrganizationPut">
			<id column="oid" property="oid" />
			<id column="status" property="status" />
			<id column="imgurl" property="imgurl" />
			<id column="erweima" property="erweima" />
			<id column="property_name" property="propertyName" />
			<id column="property_type" property="propertyType" />
			<id column="property_guige" property="propertyGuige" />
			<id column="property_sn" property="propertySn" />
			<id column="property_nums" property="propertyNums" />
			<id column="property_jine" property="propertyJine" />
			<id column="companys" property="companys" />
			<id column="departments" property="departments" />
			<id column="use_person" property="usePerson" />
			<id column="areas" property="areas" />
			<id column="store_areas" property="storeAreas" />
			<id column="manager_person" property="managerPerson" />
			<id column="belong_company" property="belongCompany" />
			<id column="purchase_time" property="purchaseTime" />
			<id column="suppliers" property="suppliers" />
			<id column="service_life" property="serviceLife" />
			<id column="creator_person" property="creatorPerson" />
			<id column="source_of" property="sourceOf" />
			<id column="insert_time" property="insertTime" />
			<id column="update_time" property="updateTime" />
			<id column="delete_id" property="deleteId" />
			<id column="maintain_cycle" property="maintainCycle" />
			<id column="spare_is" property="spareIs" />
			<id column="parent_id" property="parentId" />
		</collection>
	</resultMap>

	<sql id="selectexpend">
		<where>
			<if test="aid != null and aid !='' ">
				and starch_organization_alteration.aid = #{aid}
			</if>
			<if test="astatus != null and astatus !='' ">
				and starch_organization_alteration.astatus = #{astatus}
			</if>
			<if test="alterationNumber != null and alterationNumber !='' ">
				and starch_organization_alteration.alteration_number = #{alterationNumber}
			</if>
			<if test="alterationDate != null and alterationDate !='' ">
				and starch_organization_alteration.alteration_date = #{alterationDate}
			</if>
			<if test="alterationPerson != null and alterationPerson !='' ">
				and starch_organization_alteration.alteration_person = #{alterationPerson}
			</if>
			<if test="alterationType != null and alterationType !='' ">
				and starch_organization_alteration.alteration_type = #{alterationType}
			</if>
			<if test="alterationName != null and alterationName !='' ">
				and starch_organization_alteration.alteration_name = #{alterationName}
			</if>
			<if test="alterationEares != null and alterationEares !='' ">
				and starch_organization_alteration.alteration_eares = #{alterationEares}
			</if>
			<if test="depositRegion != null and depositRegion !='' ">
				and starch_organization_alteration.deposit_region = #{depositRegion}
			</if>
			<if test="useCompany != null and useCompany !='' ">
				and starch_organization_alteration.use_company = #{useCompany}
			</if>
			<if test="useDepartment != null and useDepartment !='' ">
				and starch_maintenance_alteration.use_department = #{useDepartment}
			</if>
			<if test="usePerson != null and usePerson !='' ">
				and starch_maintenance_alteration.use_person = #{usePerson}
			</if>
			<if test="remarks != null and remarks !='' ">
				and starch_maintenance_alteration.remarks = #{remarks}
			</if>
			<if test="parentId != null and parentId !='' ">
				and starch_maintenance_alteration.parent_id = #{parentId}
			</if>
			and starch_maintenance_alteration.delete_id = 0
		</where>
	</sql>

	<!--	queryRelevanceCatList-->
	<select id="queryRelevanceCatList"  parameterType="com.jindan.jdy.common.dto.StarchOrganizationAlterationDto" resultMap="BaseResultMapDto">
		SELECT
		starch_maintenance_alteration.*,starch_organization_put.*
		FROM  starch_maintenance_alteration
		left JOIN starch_alteration_put ON starch_alteration_put.alteration_id = starch_maintenance_alteration.wid and starch_alteration_put.delete_id = 0
		left JOIN starch_organization_put ON starch_alteration_put.put_id = starch_organization_put.oid and starch_organization_put.delete_id = 0
		<include refid="selectexpend"></include>
	</select>


</mapper>